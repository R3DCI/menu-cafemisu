<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CaféMisu – Menu</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&display=swap" rel="stylesheet">
<style>
:root { --cafe:#A87555; --fond:#F9F5F1; --bord:rgba(168,117,85,0.25); --radius:16px; }
body{background:var(--fond);font-family:'Playfair Display',serif;color:var(--cafe);margin:0;padding:0 20px 180px;overflow-x:hidden;}
h1{text-align:center;margin-top:40px;font-size:2.7rem;font-weight:700;}
#back-home{display:block;text-align:center;margin:10px auto 30px;font-size:1.1rem;color:var(--cafe);opacity:.8;text-decoration:none;}
#back-home:hover{opacity:1;}
h2{margin-top:40px;font-size:1.9rem;border-bottom:2px solid var(--cafe);display:inline-block;padding-bottom:4px;}
.item{display:flex;justify-content:space-between;align-items:center;padding:14px 0;border-bottom:1px solid var(--bord);}
.name{font-weight:600;font-size:1.2rem;max-width:65%;}
.price{font-size:1.15rem;}
.add-btn{width:46px;height:46px;border-radius:50%;border:2px solid var(--cafe);display:flex;justify-content:center;align-items:center;cursor:pointer;font-size:24px;background:white;transition:.2s}
.add-btn:hover{background:#e8dcd4;}
/* bottom sheet */
#cart-sheet{position:fixed;bottom:-100%;left:0;width:100%;height:75%;background:rgba(255,255,255,0.8);backdrop-filter:blur(18px);border-radius:24px 24px 0 0;padding:24px;transition:.35s;z-index:999;overflow-y:auto;}
#sheet-header{font-size:1.6rem;font-weight:700;display:flex;justify-content:space-between;margin-bottom:20px;}
.cart-item{display:grid;grid-template-columns:1fr auto auto;gap:12px;padding:14px 0;border-bottom:1px solid var(--bord);}
.qty-btn{width:34px;height:34px;border-radius:50%;border:2px solid var(--cafe);background:white;font-size:20px;cursor:pointer;}
.total-line{text-align:right;font-size:1.5rem;margin:20px 0;}
.btn{width:100%;padding:16px;border-radius:var(--radius);font-size:1.2rem;font-weight:600;border:none;cursor:pointer;}
.btn-primary{background:var(--cafe);color:white;}
.btn-secondary{background:#cbb8ae;color:white;margin-top:10px;}
/* floating cart */
#floating-cart-btn{position:fixed;bottom:20px;right:20px;border:none;background:none;cursor:pointer;z-index:1000;}
#cart-count{position:absolute;top:-6px;right:-6px;background:white;border:2px solid var(--cafe);border-radius:50%;padding:4px 8px;font-weight:700;}
/* popup */
#popup-bg{position:fixed;inset:0;background:rgba(0,0,0,0.45);backdrop-filter:blur(4px);display:none;z-index:2000;}
#popup{width:88%;max-width:420px;background:white;margin:120px auto;padding:28px;border-radius:22px;box-shadow:0 10px 40px rgba(0,0,0,0.25);}
.input{width:100%;padding:14px;margin-bottom:12px;border:2px solid var(--bord);border-radius:var(--radius);}
</style>
</head>
<body>

<h1>Menu CaféMisu</h1>
<a id="back-home" href="index.html">← Retour à l’accueil</a>

<!-- Sample Menu (shortened for demo) -->
<h2>Les lattés</h2>
<div class="item"><span class="name">Iced Americano</span><span class="price">4.000 FCFA</span><div class="add-btn" onclick="addToCart('Iced Americano',4000)">+</div></div>
<div class="item"><span class="name">Spanish Latte</span><span class="price">5.500 FCFA</span><div class="add-btn" onclick="addToCart('Spanish Latte',5500)">+</div></div>

<!-- bottom sheet -->
<div id="cart-sheet">
  <div id="sheet-header"><span>Votre panier</span><span onclick="closeCart()" style="cursor:pointer">✕</span></div>
  <div id="cart-items"></div>
  <div class="total-line">Total : <span id="cart-total">0</span> FCFA</div>
  <button class="btn btn-primary" onclick="openPopup()">Commander sur WhatsApp</button>
  <button class="btn btn-secondary" onclick="closeCart()">Fermer</button>
</div>

<!-- floating -->
<button id="floating-cart-btn" onclick="openCart()">
    <img src="tiramisu-icon.png" width="70">
    <span id="cart-count">0</span>
</button>

<!-- popup -->
<div id="popup-bg">
  <div id="popup">
    <h2 style="text-align:center;">Infos de livraison</h2>
    <input class="input" id="nom" placeholder="Nom complet">
    <input class="input" id="tel" placeholder="Téléphone">
    <input class="input" id="adr" placeholder="Adresse de livraison">
    <button class="btn btn-primary" onclick="confirmAndSend()">Confirmer et envoyer</button>
    <button class="btn btn-secondary" onclick="closePopup()">Annuler</button>
  </div>
</div>

<script>
let cart=[];
function addToCart(name,price){
 let it=cart.find(i=>i.name===name);
 if(it) it.qty++; else cart.push({name,price,qty:1});
 updateCart(); render();
}
function updateCart(){document.getElementById("cart-count").innerText=cart.reduce((a,b)=>a+b.qty,0);}
function openCart(){document.getElementById("cart-sheet").style.bottom="0";}
function closeCart(){document.getElementById("cart-sheet").style.bottom="-100%";}
function render(){
 let c=document.getElementById("cart-items"); c.innerHTML="";
 cart.forEach((item,i)=>{
   c.innerHTML+=`
     <div class="cart-item">
       <div>${item.name}</div>
       <div class="qty-controls">
         <button class="qty-btn" onclick="dec(${i})">−</button>
         <span>${item.qty}</span>
         <button class="qty-btn" onclick="inc(${i})">+</button>
       </div>
       <div>${(item.price*item.qty).toLocaleString()} FCFA</div>
     </div>`;
 });
 document.getElementById("cart-total").innerText=
   cart.reduce((a,b)=>a+b.price*b.qty,0).toLocaleString();
}
function inc(i){cart[i].qty++; render(); updateCart();}
function dec(i){cart[i].qty--; if(cart[i].qty<=0) cart.splice(i,1); render(); updateCart();}
function openPopup(){ if(cart.length===0){alert("Panier vide");return;} document.getElementById("popup-bg").style.display="block";}
function closePopup(){ document.getElementById("popup-bg").style.display="none";}
function confirmAndSend(){
 let n=document.getElementById("nom").value.trim();
 let t=document.getElementById("tel").value.trim();
 let a=document.getElementById("adr").value.trim();
 if(!n||!t||!a){alert("Veuillez remplir tous les champs"); return;}
 let msg="Bonjour, commande :%0A%0A";
 cart.forEach(it=>{msg+=`• ${it.name} x${it.qty} — ${(it.price*it.qty).toLocaleString()} FCFA%0A`;});
 let tot=cart.reduce((x,y)=>x+y.price*y.qty,0).toLocaleString();
 msg+=`%0ATotal : ${tot} FCFA%0A%0ANom : ${n}%0ATéléphone : ${t}%0AAdresse : ${a}`;
 window.location.href=`https://wa.me/2250716699999?text=${msg}`;
}
</script>

</body></html>
